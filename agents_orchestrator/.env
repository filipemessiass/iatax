# Backup do .env atual
Copy-Item .env .env.backup

# Criar .env avanÃ§ado
$envContent = @"
# ============================================================================
# TAXHUB IA - CONFIGURAÃ‡ÃƒO AVANÃ‡ADA
# ============================================================================

# ============================================================================
# GEMINI API - CHAVE PRINCIPAL (OBRIGATÃ“RIO)
# ============================================================================
GEMINI_API_KEY=AIzaSyDQPjP1Iwrwe0C8hWTG6DG79KblY_-oOxQ
GOOGLE_API_KEY=AIzaSyDQPjP1Iwrwe0C8hWTG6DG79KblY_-oOxQ

# Modelo recomendado
GEMINI_MODEL=gemini-2.0-flash-exp

# ============================================================================
# PARÃ‚METROS DE GERAÃ‡ÃƒO
# ============================================================================
GEMINI_TEMPERATURE=0.7
GEMINI_MAX_TOKENS=1200
GEMINI_MAX_TOKENS_GUARDRAIL=600
GEMINI_TOP_P=0.8

# ============================================================================
# THRESHOLDS ANTI-ALUCINAÃ‡ÃƒO (0-10)
# ============================================================================
THRESHOLD_IRPJ=7.0
THRESHOLD_TP=8.0
THRESHOLD_LEI_BEM=7.5

# ============================================================================
# PERFORMANCE
# ============================================================================
MAX_CONTEXT_CHARS=300000
CACHE_EXPIRATION_DAYS=7
MAX_REQUESTS_PER_MINUTE=45
RATE_LIMIT_TIME_WINDOW=60

# Retry
RETRY_MAX_ATTEMPTS=3
RETRY_DELAY_1=5
RETRY_DELAY_2=15
RETRY_DELAY_3=30

# ============================================================================
# LOGS
# ============================================================================
LOG_LEVEL=INFO
VERBOSE_MODE=false
LOG_TO_FILE=true
LOG_DIR=./logs

# ============================================================================
# CAMINHOS
# ============================================================================
KNOWLEDGE_BASE_PATH=./knowledge
VALIDATED_RESPONSES_PATH=./cache/respostas_validadas
CACHE_DIR=./cache
VECTORSTORE_PATH=./vectorstore_index
"@

$envContent | Out-File -Encoding utf8 -NoNewline .env

Write-Host "âœ… .env avanÃ§ado criado" -ForegroundColor Green